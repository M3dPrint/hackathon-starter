
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if IE]><script type="text/javascript" src="/js/excanvas.js"></script><![endif]-->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="/js/fabric.js"></script>
    <script type="text/javascript" src="/js/caseEditor.js"></script>
    <script type="text/javascript" src="/js/jquery.miniColors.min.js"></script>

    <!-- Le styles -->
    <link type="text/css" rel="stylesheet" href="/css/jquery.miniColors.css" />
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.min.css" rel="stylesheet">
    <script type="text/javascript">
    </script>




    <form method="post" enctype="multipart/form-data" action="/upload"  id="data">
    <input type="file"  id="image_file" name="image_file[]">
    <input type="submit" value="submit" name = "submit">
    </form>

    <!--<button class="btn btn-primary ">Upload</button>-->
    <div id="imgid">

        ImageTracer.imageToSVG( 'smiley.png', alert );
    </div>


    <script>
//        $(function() {

            $("form#data").submit(function(event){

                event.preventDefault();

                var url  = 'http://localhost:8080/upload';
                var image_file = $('#image_file').get(0).files[0];

                var formData = new FormData();
                formData.append("file", image_file);

                $.ajax({
                    url: url,
                    type: 'POST',
                    data: formData,
//                    async: false,
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: function (status) {
                        console.log(arguments)
                        // do something on success
                    }
                }).done(function (){
                    console.log(arguments)
                    $("#imgid").html("<img src=/uploads/"+ arguments[0].file+">")


                } );

                return false;

            });

//        });

    </script>

    <script src="imagetracer_v1.2.1.js"></script>












    <!--<form id="data">-->
        <!--<fieldset>-->
            <!--<div>Asset File: <input id="image_file" name="image_file[]" type="file" /></div>-->
            <!--<div><input type="submit" value="Submit"></div>-->
        <!--</fieldset>-->
    <!--</form>-->


    <!--<script>-->
        <!--$(function() {-->

            <!--$("form#data").submit(function(event){-->

                <!--event.preventDefault();-->

                <!--var url  = 'http://localhost:8080/';-->
                <!--var image_file = $('#image_file').get(0).files[0];-->

                <!--var formData = new FormData();-->
                <!--formData.append("image_file", image_file);-->

                <!--$.ajax({-->
                    <!--url: url,-->
                    <!--type: 'POST',-->
                    <!--data: formData,-->
                    <!--async: false,-->
                    <!--cache: false,-->
                    <!--contentType: false,-->
                    <!--processData: false,-->
                    <!--success: function (status) {-->
                        <!--// do something on success-->
                      <!---->
                    <!--}-->
                <!--});-->

                <!--return false;-->

            <!--});-->

        <!--});-->

    <!--</script>-->